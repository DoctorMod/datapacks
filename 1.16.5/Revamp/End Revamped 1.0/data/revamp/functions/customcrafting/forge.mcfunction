#Forge Spawner
execute as @e[tag=spawnForge] at @s run clone 172 78 56 174 76 54 ~-1 ~ ~-1 replace
execute as @e[tag=spawnForge] at @s run summon armor_stand ~ ~1 ~ {Invulnerable:1b,Marker:1b,Invisible:1b,Tags:["Forge"]}
kill @e[tag=spawnForge]

#Delete Forge
execute as @e[tag=Forge] at @s unless blocks 172 78 56 174 76 55 ~-1 ~-1 ~ masked run particle minecraft:explosion ~ ~ ~ 1 1 1 1 100
execute as @e[tag=Forge] at @s unless blocks 172 78 56 174 76 55 ~-1 ~-1 ~ masked run tellraw @a[distance=..10] {"text":"The Forge has been destroyed, and will no longer work.","color":"gray"}
execute as @e[tag=Forge] at @s unless blocks 172 78 56 174 76 55 ~-1 ~-1 ~ masked run kill @s

#Vanilla Iron
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:3b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:iron_ingot",Count:1b},{Slot:5b,id:"minecraft:iron_ingot",Count:1b},{Slot:6b,id:"minecraft:iron_ingot",Count:1b},{Slot:7b,id:"minecraft:iron_ingot",Count:1b},{Slot:8b,id:"minecraft:iron_ingot",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_chestplate",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:3b,id:"minecraft:iron_ingot",Count:1b},{Slot:5b,id:"minecraft:iron_ingot",Count:1b},{Slot:6b,id:"minecraft:iron_ingot",Count:1b},{Slot:8b,id:"minecraft:iron_ingot",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_leggings",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:3b,id:"minecraft:iron_ingot",Count:1b},{Slot:5b,id:"minecraft:iron_ingot",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_helmet",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:stick",Count:1b},{Slot:7b,id:"minecraft:stick",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_pickaxe",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:stick",Count:1b},{Slot:5b,id:"minecraft:iron_ingot",Count:1b},{Slot:7b,id:"minecraft:stick",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_axe",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:2b,id:"minecraft:iron_ingot",Count:1b},{Slot:3b,id:"minecraft:iron_ingot",Count:1b},{Slot:5b,id:"minecraft:iron_ingot",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_boots",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:iron_ingot",Count:1b},{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:stick",Count:1b},{Slot:7b,id:"minecraft:stick",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_hoe",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:iron_ingot",Count:1b},{Slot:7b,id:"minecraft:stick",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_sword",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:1b,id:"minecraft:iron_ingot",Count:1b},{Slot:4b,id:"minecraft:stick",Count:1b},{Slot:7b,id:"minecraft:stick",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:iron_shovel",Count:1b,tag:{Tags:["sfx"]}}]
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:4b,id:"minecraft:iron_ingot",Count:1b},{Slot:6b,id:"minecraft:iron_ingot",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:shears",Count:1b,tag:{Tags:["sfx"]}}]

#Obsidian Armor
#execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:obsidian",Count:1b},{Slot:2b,id:"minecraft:obsidian",Count:1b},{Slot:3b,id:"minecraft:obsidian",Count:1b},{Slot:4b,id:"minecraft:obsidian",Count:1b},{Slot:5b,id:"minecraft:obsidian",Count:1b},{Slot:6b,id:"minecraft:obsidian",Count:1b},{Slot:7b,id:"minecraft:obsidian",Count:1b},{Slot:8b,id:"minecraft:obsidian",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:leather_chestplate",Count:1b,tag:{Tags:["sfx"]}}]
#execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:obsidian",Count:1b},{Slot:1b,id:"minecraft:obsidian",Count:1b},{Slot:2b,id:"minecraft:obsidian",Count:1b},{Slot:3b,id:"minecraft:obsidian",Count:1b},{Slot:5b,id:"minecraft:obsidian",Count:1b},{Slot:6b,id:"minecraft:obsidian",Count:1b},{Slot:8b,id:"minecraft:obsidian",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:leather_leggings",Count:1b,tag:{Tags:["sfx"]}}]
#execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:obsidian",Count:1b},{Slot:1b,id:"minecraft:obsidian",Count:1b},{Slot:2b,id:"minecraft:obsidian",Count:1b},{Slot:3b,id:"minecraft:obsidian",Count:1b},{Slot:5b,id:"minecraft:obsidian",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:leather_helmet",Count:1b,tag:{Tags:["sfx"]}}]
#execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:0b,id:"minecraft:obsidian",Count:1b},{Slot:2b,id:"minecraft:obsidian",Count:1b},{Slot:3b,id:"minecraft:obsidian",Count:1b},{Slot:5b,id:"minecraft:obsidian",Count:1b}]} run data modify block ~ ~ ~-1 Items set value [{Slot:4b,id:"minecraft:leather_boots",Count:1b}]

#sfx
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:4b,tag:{Tags:["sfx"]}}]} run playsound minecraft:block.lava.extinguish master @a[distance=..10] ~ ~ ~ 1 0.5
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:4b,tag:{Tags:["sfx"]}}]} run advancement grant @s only revamp:recipes/use_forge
execute as @e[tag=Forge] at @s if block ~ ~ ~-1 minecraft:dropper{Items:[{Slot:4b,tag:{Tags:["sfx"]}}]} run data modify block ~ ~ ~-1 Items[0].tag.Tags set value 0